# Rate Limiter –¥–ª—è –∑–∞—â–∏—Ç—ã ChatGPT API

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞–º–∏:**

1. **–õ–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É**: 20 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
2. **–õ–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤ –≤ –º–∏–Ω—É—Ç—É**: 50,000 —Ç–æ–∫–µ–Ω–æ–≤/–º–∏–Ω (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)  
3. **–õ–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —á–∞—Å**: 100 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
4. **–õ–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤ –≤ —á–∞—Å**: 200,000 —Ç–æ–∫–µ–Ω–æ–≤/—á–∞—Å (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)

## üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

- **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: –ø–æ IP + User Agent
- **–£–º–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤**: ~4 —Å–∏–º–≤–æ–ª–∞ = 1 —Ç–æ–∫–µ–Ω + 1000 —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ –æ—Ç–≤–µ—Ç
- **In-memory —Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –±—ã—Å—Ç—Ä–æ, –±–µ–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞**: —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∑–∞–ø–∏—Å–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–ü–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –≤—Ä–µ–º—è –¥–æ —Å–±—Ä–æ—Å–∞ –ª–∏–º–∏—Ç–∞

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env.local`:

```env
RATE_LIMIT_REQUESTS_PER_MINUTE=20
RATE_LIMIT_TOKENS_PER_MINUTE=50000
RATE_LIMIT_REQUESTS_PER_HOUR=100
RATE_LIMIT_TOKENS_PER_HOUR=200000
```

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞

‚úÖ **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç**: —Å–∫—Ä—É—Ç–∫—É —Ç–æ–∫–µ–Ω–æ–≤, —Å–ø–∞–º-–∞—Ç–∞–∫–∏, –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ OpenAI –ª–∏–º–∏—Ç–æ–≤  
‚úÖ **–≠–∫–æ–Ω–æ–º–∏—Ç**: –≤–∞—à–∏ –¥–µ–Ω—å–≥–∏ –Ω–∞ OpenAI API  
‚úÖ **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç**: —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞  

## üì± –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

–ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç:
```
‚ö†Ô∏è –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —á–µ—Ä–µ–∑ 45 —Å–µ–∫.

–õ–∏–º–∏—Ç—ã –∑–∞—â–∏—â–∞—é—Ç –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è API –∏ —ç–∫–æ–Ω–æ–º—è—Ç –≤–∞—à–∏ —Ç–æ–∫–µ–Ω—ã.
```

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í development —Ä–µ–∂–∏–º–µ –≤—ã–≤–æ–¥—è—Ç—Å—è –ª–æ–≥–∏:
```
[Rate Limiter] 192.168.1.1-Mozilla... - 5/20 requests, 15000/50000 tokens
```

Rate limiter –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ 